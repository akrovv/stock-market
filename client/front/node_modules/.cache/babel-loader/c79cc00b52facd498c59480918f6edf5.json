{"ast":null,"code":"import _asyncToGenerator from\"/Users/artemblohin/Desktop/hakaton-2023-2-team1-stock/stock-market/client/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/artemblohin/Desktop/hakaton-2023-2-team1-stock/stock-market/client/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/artemblohin/Desktop/hakaton-2023-2-team1-stock/stock-market/client/front/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{Link,NavLink}from'react-router-dom';import menus from'../../pages/menu';import{Dropdown}from'react-bootstrap';import'./styles.scss';import avt from'../../assets/images/avt/avt-01.jpg';import DarkMode from'./DarkMode';import{useAuth}from'../../AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),scroll=_useState2[0],setScroll=_useState2[1];useEffect(function(){window.addEventListener(\"scroll\",function(){setScroll(window.scrollY>300);});return function(){setScroll({});};},[]);var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),menuActive=_useState4[0],setMenuActive=_useState4[1];var handleMenuActive=function handleMenuActive(){setMenuActive(!menuActive);};var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),activeIndex=_useState6[0],setActiveIndex=_useState6[1];var handleDropdown=function handleDropdown(index){setActiveIndex(index);};var _useAuth=useAuth(),logout=_useAuth.logout;var _useAuth2=useAuth(),isLoggedIn=_useAuth2.isLoggedIn;var handleLogout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:localStorage.removeItem('token');logout();_context.prev=2;_context.next=5;return fetch(\"/api/user/logout\",{method:\"GET\"});case 5:response=_context.sent;if(response.ok){_context.next=8;break;}throw new Error(\"Network response was not ok\");case 8:navigate(\"/\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);console.error(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function handleLogout(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"header\",{id:\"header_main\",className:\"header \".concat(scroll?'is-fixed':''),children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__body d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header__left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"left__main\",children:/*#__PURE__*/_jsx(\"nav\",{id:\"main-nav\",className:\"main-nav \".concat(menuActive?'active':''),children:/*#__PURE__*/_jsx(\"ul\",{id:\"menu-primary-menu\",className:\"menu\",children:menus.map(function(data,idx){return/*#__PURE__*/_jsxs(\"li\",{onClick:function onClick(){return handleDropdown(idx);},className:\"menu-item \".concat(data.namesub?'menu-item-has-children':'',\" \").concat(activeIndex===idx?'active':''),children:[/*#__PURE__*/_jsx(Link,{to:data.links,children:data.name}),data.namesub&&/*#__PURE__*/_jsx(\"ul\",{className:\"sub-menu\",children:data.namesub.map(function(submenu){return/*#__PURE__*/_jsx(\"li\",{className:\"menu-item\",children:/*#__PURE__*/_jsx(NavLink,{to:submenu.links,children:submenu.sub})},submenu.id);})})]},idx);})})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header__right\",children:[/*#__PURE__*/_jsx(DarkMode,{}),/*#__PURE__*/_jsx(\"div\",{className:\"mobile-button \".concat(menuActive?'active':''),onClick:handleMenuActive,children:/*#__PURE__*/_jsx(\"span\",{})}),isLoggedIn?/*#__PURE__*/_jsx(\"div\",{className:\"wallet\",children:/*#__PURE__*/_jsx(Link,{to:\"/wallet\",children:\" Wallet \"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"span\",{className:\"me-4\",children:\"Login\"})}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Register\"})})]}),isLoggedIn&&/*#__PURE__*/_jsxs(Dropdown,{className:\"user\",children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{children:/*#__PURE__*/_jsx(\"img\",{src:avt,alt:\"Rockie\"})}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#\",children:/*#__PURE__*/_jsxs(Link,{className:\"dropdown-item\",to:\"#\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-user font-size-16 align-middle me-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Profile\"})]})}),/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#\",children:/*#__PURE__*/_jsxs(Link,{className:\"dropdown-item\",to:\"#\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-wallet font-size-16 align-middle me-1\"}),/*#__PURE__*/_jsx(\"span\",{children:\"My Wallet\"})]})}),/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#\",children:/*#__PURE__*/_jsxs(Link,{className:\"dropdown-item text-danger\",to:\"/login\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-power-off font-size-16 align-middle me-1 text-danger\"}),/*#__PURE__*/_jsx(\"span\",{onClick:handleLogout,children:\"Logout\"})]})})]})]})]})]})})})})});};export default Header;","map":{"version":3,"sources":["/Users/artemblohin/Desktop/hakaton-2023-2-team1-stock/stock-market/client/front/src/components/header/index.jsx"],"names":["React","useState","useEffect","Link","NavLink","menus","Dropdown","avt","DarkMode","useAuth","Header","scroll","setScroll","window","addEventListener","scrollY","menuActive","setMenuActive","handleMenuActive","activeIndex","setActiveIndex","handleDropdown","index","logout","isLoggedIn","handleLogout","localStorage","removeItem","fetch","method","response","ok","Error","navigate","console","error","map","data","idx","namesub","links","name","submenu","sub","id"],"mappings":"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","sourcesContent":["import React , { useState , useEffect } from 'react';\r\n\r\nimport { Link , NavLink } from 'react-router-dom';\r\nimport menus from '../../pages/menu';\r\nimport { Dropdown } from 'react-bootstrap';\r\n\r\nimport './styles.scss';\r\nimport avt from '../../assets/images/avt/avt-01.jpg';\r\nimport DarkMode from './DarkMode';\r\nimport { useAuth } from '../../AuthContext';\r\n\r\n\r\n\r\nconst Header = () => {\r\n    const [scroll, setScroll] = useState(false);\r\n        useEffect(() => {\r\n        window.addEventListener(\"scroll\", () => {\r\n            setScroll(window.scrollY > 300);\r\n        });\r\n        return () => {\r\n            setScroll({});\r\n        }\r\n    }, []);\r\n\r\n    const [menuActive, setMenuActive] = useState(null);\r\n\r\n    const handleMenuActive = () => {\r\n        setMenuActive(!menuActive);\r\n      };\r\n\r\n    const [activeIndex, setActiveIndex] = useState(null);\r\n    const handleDropdown = index => {\r\n        setActiveIndex(index); \r\n    };\r\n\r\n    const { logout } = useAuth();\r\n    const { isLoggedIn } = useAuth();\r\n\r\n    const handleLogout = async () => {\r\n        localStorage.removeItem('token');\r\n        logout();\r\n        \r\n        try {\r\n            const response = await fetch(\"/api/user/logout\", {\r\n                method: \"GET\",\r\n            });\r\n    \r\n            if (!response.ok) {\r\n                throw new Error(\"Network response was not ok\");\r\n            }\r\n    \r\n            navigate(\"/\");\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <header id=\"header_main\" className={`header ${scroll ? 'is-fixed' : ''}`}>\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                <div className=\"col-12\">\r\n                    <div className=\"header__body d-flex justify-content-between\">\r\n                    <div className=\"header__left\">\r\n                        <div className=\"left__main\">\r\n                            <nav id=\"main-nav\" className={`main-nav ${menuActive ? 'active' : ''}`}>\r\n                                <ul id=\"menu-primary-menu\" className=\"menu\">\r\n                                {\r\n                                    menus.map((data,idx) => (\r\n                                        <li key={idx} onClick={()=> handleDropdown(idx)} className={`menu-item ${data.namesub ? 'menu-item-has-children' : ''} ${activeIndex === idx ? 'active' : ''}`} \r\n                                        \r\n                                        >\r\n                                            <Link to={data.links}>{data.name}</Link>\r\n                                            {\r\n                                                data.namesub &&\r\n                                                <ul className=\"sub-menu\">\r\n                                                    {\r\n                                                        data.namesub.map((submenu) => (\r\n                                                            <li key={submenu.id} className=\"menu-item\"><NavLink to={submenu.links}>{submenu.sub}</NavLink></li>\r\n                                                        ))\r\n                                                    }\r\n                                                </ul>\r\n                                            }\r\n                                            \r\n                                        </li>\r\n                                    ))\r\n                                }\r\n                                </ul>\r\n                            </nav>\r\n                            \r\n                 \r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"header__right\">\r\n                        <DarkMode />\r\n                        \r\n                            <div className={`mobile-button ${menuActive ? 'active' : ''}`} onClick={handleMenuActive}><span></span></div>\r\n                            {isLoggedIn ? (\r\n                            <div className=\"wallet\">\r\n                            <Link to=\"/wallet\"> Wallet </Link>\r\n                            </div>\r\n                            ) : (\r\n                                <div className=\"user\">\r\n                                    <Link to=\"/login\"><span className='me-4'>Login</span></Link>\r\n                                    <Link to=\"/register\"><span>Register</span></Link>\r\n                                </div>\r\n                            )}\r\n                            {isLoggedIn && (\r\n                            <Dropdown className='user'>\r\n                                    <Dropdown.Toggle >\r\n                                        <img src={avt} alt=\"Rockie\" />  \r\n                                    </Dropdown.Toggle>\r\n\r\n                                    <Dropdown.Menu>\r\n                                    <Dropdown.Item href=\"#\">\r\n                                        <Link className=\"dropdown-item\" to=\"#\"><i className=\"bx bx-user font-size-16 align-middle me-1\"></i>\r\n                                        <span>Profile</span></Link>\r\n                                    </Dropdown.Item>\r\n                                    <Dropdown.Item href=\"#\">\r\n                                        <Link className=\"dropdown-item\" to=\"#\"><i\r\n                                            className=\"bx bx-wallet font-size-16 align-middle me-1\"\r\n                                        ></i>\r\n                                        <span>My Wallet</span></Link>\r\n                                    </Dropdown.Item>\r\n                                    <Dropdown.Item href=\"#\">\r\n                                        <Link className=\"dropdown-item text-danger\" to=\"/login\"\r\n                                        ><i\r\n                                            className=\"bx bx-power-off font-size-16 align-middle me-1 text-danger\"\r\n                                        ></i>\r\n                                        <span onClick={handleLogout}>Logout</span></Link>\r\n                                    </Dropdown.Item>\r\n                                    \r\n                                    </Dropdown.Menu>\r\n                                </Dropdown>\r\n                        )}\r\n                    </div>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n       \r\n    );\r\n}\r\n\r\nexport default Header;"]},"metadata":{},"sourceType":"module"}