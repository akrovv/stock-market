{"ast":null,"code":"import _asyncToGenerator from\"/Users/artemblohin/Desktop/hakaton-2023-2-team1-stock/stock-market/client/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/artemblohin/Desktop/hakaton-2023-2-team1-stock/stock-market/client/front/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/artemblohin/Desktop/hakaton-2023-2-team1-stock/stock-market/client/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/artemblohin/Desktop/hakaton-2023-2-team1-stock/stock-market/client/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/artemblohin/Desktop/hakaton-2023-2-team1-stock/stock-market/client/front/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import{Tabs,TabPanel}from'react-tabs';import'react-tabs/style/react-tabs.css';import PageTitle from'../components/pagetitle';import{useAuth}from'../AuthContext';import{useNavigate}from\"react-router-dom\";import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.id,e.target.value)));};var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var navigate=useNavigate();var _useAuth=useAuth(),login=_useAuth.login;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var errors,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(formData);errors={};if(!formData.email.includes('@')){errors.email='Please enter a valid email address.';}if(formData.password.trim()===''){errors.password='Password is required.';}if(!(Object.keys(errors).length===0)){_context.next=20;break;}localStorage.setItem(\"token\",\"123\");login();_context.prev=8;_context.next=11;return fetch(\"/api/user/login\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});case 11:response=_context.sent;if(response.ok){_context.next=14;break;}throw new Error(\"Network response was not ok\");case 14:navigate(\"/\");_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](8);console.error(_context.t0);case 20:setErrors(errors);case 21:case\"end\":return _context.stop();}}},_callee,null,[[8,17]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PageTitle,{heading:\"Login\",title:\"Login\"}),/*#__PURE__*/_jsx(\"section\",{className:\"register login\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"block-text center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"heading\",children:\"Login To Rockie\"}),/*#__PURE__*/_jsx(\"p\",{className:\"desc fs-20\",children:\"Welcome back! Log In now to start trading\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(Tabs,{children:/*#__PURE__*/_jsx(TabPanel,{children:/*#__PURE__*/_jsx(\"div\",{className:\"content-inner\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",placeholder:\"Please fill in the email form.\",autoComplete:\"username\",onChange:handleChange,required:true}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group s1\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Please enter a password.\",autoComplete:\"new-password\",onChange:handleChange,required:true}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.password})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-action\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Not a member?\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})]})})})})})]})})})]});}export default Login;","map":{"version":3,"sources":["/Users/artemblohin/Desktop/hakaton-2023-2-team1-stock/stock-market/client/front/src/pages/Login.jsx"],"names":["React","useState","Tabs","TabPanel","PageTitle","useAuth","useNavigate","Link","Login","props","email","password","formData","setFormData","handleChange","e","target","id","value","errors","setErrors","navigate","login","handleSubmit","preventDefault","console","log","includes","trim","Object","keys","length","localStorage","setItem","fetch","method","headers","body","JSON","stringify","response","ok","Error","error"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\n\r\nimport { Tabs, TabPanel } from 'react-tabs';\r\nimport 'react-tabs/style/react-tabs.css';\r\nimport PageTitle from '../components/pagetitle';\r\nimport { useAuth } from '../AuthContext';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport {Link} from 'react-router-dom';\r\n\r\nLogin.propTypes = {\r\n    \r\n};\r\n\r\nfunction Login(props) {\r\n    const [formData, setFormData] = useState({\r\n        email: '',\r\n        password: ''\r\n    });\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({\r\n            ...formData,\r\n            [e.target.id]: e.target.value\r\n        });\r\n    };\r\n\r\n    const [errors, setErrors] = useState({});\r\n    const navigate = useNavigate();\r\n    const { login } = useAuth();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        console.log(formData)\r\n        const errors = {};\r\n        if (!formData.email.includes('@')) {\r\n            errors.email = 'Please enter a valid email address.';\r\n        }\r\n        if (formData.password.trim() === '') {\r\n            errors.password = 'Password is required.';\r\n        }\r\n\r\n        if (Object.keys(errors).length === 0) {\r\n            localStorage.setItem(\"token\", \"123\");\r\n            login()\r\n        \r\n            try {\r\n                const response = await fetch(\"/api/user/login\", {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify(formData)\r\n                });\r\n    \r\n                if (!response.ok) {\r\n                    throw new Error(\"Network response was not ok\");\r\n                }\r\n    \r\n                navigate(\"/\");\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        }\r\n            \r\n        setErrors(errors);\r\n    };\r\n\r\n\r\n    return (\r\n        <div>\r\n            <PageTitle heading='Login' title='Login' />\r\n\r\n            <section className=\"register login\">\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                    <div className=\"block-text center\">\r\n                    <h3 className=\"heading\">Login To Rockie</h3>\r\n                    <p className=\"desc fs-20\">\r\n                        Welcome back! Log In now to start trading\r\n                    </p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                <Tabs>\r\n                    <TabPanel>\r\n                        <div className=\"content-inner\">\r\n                            <form onSubmit={handleSubmit}>\r\n                                <div className=\"form-group\">\r\n                                <label for=\"email\">Email</label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    className=\"form-control\"\r\n                                    id=\"email\"\r\n                                    placeholder=\"Please fill in the email form.\"\r\n                                    autoComplete=\"username\"\r\n                                    onChange={handleChange}\r\n                                    required\r\n                                />\r\n                                {errors.email && <p className=\"error\">{errors.email}</p>}\r\n                                </div>\r\n                                <div className=\"form-group s1\">\r\n                                <label>Password </label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    className=\"form-control\"\r\n                                    id=\"password\"\r\n                                    placeholder=\"Please enter a password.\"\r\n                                    autoComplete=\"new-password\"\r\n                                    onChange={handleChange}\r\n                                    required\r\n                                />\r\n                                {errors.password && <p className=\"error\">{errors.password}</p>}\r\n                                </div>\r\n\r\n                                <button type=\"submit\" className=\"btn-action\">Login</button>\r\n                                <div className=\"bottom\">\r\n                                <p>Not a member?</p>\r\n                                <Link to=\"/register\">Register</Link>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </TabPanel>                    \r\n\r\n                </Tabs> \r\n                </div>\r\n                </div>\r\n            </div>\r\n            </section>\r\n            \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}